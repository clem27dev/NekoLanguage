// web-app-reel.neko - Application web cr√©√©e avec nekoScript
nekModule WebApp {
  // Importer les packages n√©cessaires
  nekImporter Base;
  nekImporter Web;
  
  // Configuration
  nekVariable PORT = 3000;
  nekVariable TITRE = "Application Web nekoScript";
  
  // Fonction principale
  nekFonction nekPrincipal() {
    nekAfficher("D√©marrage du serveur web...");
    
    // Cr√©er le serveur
    nekVariable app = Web.cr√©erServeur();
    
    // Configurer les routes
    app.cr√©erRoute("accueil", "GET", "/", (requ√™te, r√©ponse) => {
      r√©ponse.envoyerHTML(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>${TITRE}</title>
          <style>
            body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              line-height: 1.6;
              margin: 0;
              padding: 0;
              background-color: #f4f5f7;
              color: #333;
            }
            header {
              background-color: #6a42f4;
              color: white;
              padding: 1rem;
              text-align: center;
            }
            main {
              max-width: 800px;
              margin: 20px auto;
              padding: 20px;
              background-color: white;
              border-radius: 5px;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            footer {
              text-align: center;
              padding: 1rem;
              background-color: #eee;
              color: #666;
              font-size: 0.9rem;
            }
            .card {
              border: 1px solid #ddd;
              border-radius: 5px;
              padding: 15px;
              margin-bottom: 15px;
              background-color: #f9f9f9;
            }
            .btn {
              display: inline-block;
              background-color: #6a42f4;
              color: white;
              padding: 10px 15px;
              border-radius: 4px;
              text-decoration: none;
              margin-right: 10px;
            }
            .btn:hover {
              background-color: #5535c6;
            }
          </style>
        </head>
        <body>
          <header>
            <h1>üê± ${TITRE}</h1>
            <p>Une application web cr√©√©e avec nekoScript</p>
          </header>
          
          <main>
            <h2>Bienvenue sur votre application web</h2>
            <p>Cette page a √©t√© g√©n√©r√©e dynamiquement par un serveur nekoScript.</p>
            
            <div class="card">
              <h3>Fonctionnalit√©s disponibles</h3>
              <p>Cette application d√©montre comment cr√©er un serveur web avec nekoScript. Voici quelques routes disponibles:</p>
              <ul>
                <li><a href="/">Page d'accueil</a> - Cette page</li>
                <li><a href="/api">API</a> - Retourne des donn√©es au format JSON</li>
                <li><a href="/compteur">Compteur</a> - Exemple de page interactive</li>
                <li><a href="/a-propos">√Ä propos</a> - Informations sur l'application</li>
              </ul>
            </div>
            
            <div class="card">
              <h3>Essayez l'API</h3>
              <p>L'API renvoie des informations au format JSON, id√©al pour cr√©er des applications modernes.</p>
              <a href="/api" class="btn">Acc√©der √† l'API</a>
            </div>
          </main>
          
          <footer>
            <p>Propuls√© par nekoScript - Application cr√©√©e le ${new Date().toLocaleDateString('fr-FR')}</p>
          </footer>
        </body>
        </html>
      `);
    });
    
    app.cr√©erRoute("api", "GET", "/api", (requ√™te, r√©ponse) => {
      r√©ponse.envoyerJSON({
        application: TITRE,
        version: "1.0.0",
        moteur: "nekoScript",
        date: new Date().toISOString(),
        routes: ["/", "/api", "/compteur", "/a-propos"],
        status: "op√©rationnel"
      });
    });
    
    app.cr√©erRoute("compteur", "GET", "/compteur", (requ√™te, r√©ponse) => {
      r√©ponse.envoyerHTML(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Compteur - ${TITRE}</title>
          <style>
            body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              line-height: 1.6;
              margin: 0;
              padding: 0;
              background-color: #f4f5f7;
              color: #333;
              text-align: center;
            }
            header {
              background-color: #6a42f4;
              color: white;
              padding: 1rem;
            }
            main {
              max-width: 600px;
              margin: 20px auto;
              padding: 20px;
              background-color: white;
              border-radius: 5px;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            .counter {
              font-size: 5rem;
              margin: 20px 0;
              color: #6a42f4;
            }
            .btn {
              display: inline-block;
              background-color: #6a42f4;
              color: white;
              padding: 10px 20px;
              margin: 5px;
              border-radius: 4px;
              border: none;
              cursor: pointer;
              font-size: 1rem;
            }
            .btn:hover {
              background-color: #5535c6;
            }
            a {
              color: #6a42f4;
              text-decoration: none;
            }
          </style>
        </head>
        <body>
          <header>
            <h1>üê± Compteur nekoScript</h1>
          </header>
          
          <main>
            <h2>Compteur interactif</h2>
            <p>Cliquez sur les boutons pour modifier le compteur.</p>
            
            <div class="counter" id="counter">0</div>
            
            <button class="btn" id="decrement">-</button>
            <button class="btn" id="increment">+</button>
            <button class="btn" id="reset">R√©initialiser</button>
            
            <p>
              <a href="/">Retour √† l'accueil</a>
            </p>
          </main>
          
          <script>
            // Code JavaScript client
            let count = 0;
            const counterElement = document.getElementById('counter');
            
            document.getElementById('increment').addEventListener('click', () => {
              count++;
              counterElement.textContent = count;
            });
            
            document.getElementById('decrement').addEventListener('click', () => {
              count--;
              counterElement.textContent = count;
            });
            
            document.getElementById('reset').addEventListener('click', () => {
              count = 0;
              counterElement.textContent = count;
            });
          </script>
        </body>
        </html>
      `);
    });
    
    app.cr√©erRoute("a-propos", "GET", "/a-propos", (requ√™te, r√©ponse) => {
      r√©ponse.envoyerHTML(`
        <!DOCTYPE html>
        <html lang="fr">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>√Ä propos - ${TITRE}</title>
          <style>
            body {
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
              line-height: 1.6;
              margin: 0;
              padding: 0;
              background-color: #f4f5f7;
              color: #333;
            }
            header {
              background-color: #6a42f4;
              color: white;
              padding: 1rem;
              text-align: center;
            }
            main {
              max-width: 800px;
              margin: 20px auto;
              padding: 20px;
              background-color: white;
              border-radius: 5px;
              box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            footer {
              text-align: center;
              padding: 1rem;
              background-color: #eee;
              color: #666;
              font-size: 0.9rem;
            }
            a {
              color: #6a42f4;
              text-decoration: none;
            }
            a:hover {
              text-decoration: underline;
            }
            .feature {
              margin-bottom: 20px;
              padding-bottom: 20px;
              border-bottom: 1px solid #eee;
            }
          </style>
        </head>
        <body>
          <header>
            <h1>üê± √Ä propos de ${TITRE}</h1>
          </header>
          
          <main>
            <h2>√Ä propos de cette application</h2>
            <p>
              Cette application web est un exemple cr√©√© avec nekoScript, un langage de programmation
              fran√ßais con√ßu pour √™tre accessible et intuitif.
            </p>
            
            <div class="feature">
              <h3>Langage nekoScript</h3>
              <p>
                nekoScript est un langage avec une syntaxe fran√ßaise pour rendre la programmation plus
                accessible aux d√©veloppeurs francophones. Il permet de cr√©er des applications web,
                des bots Discord et des jeux simples.
              </p>
            </div>
            
            <div class="feature">
              <h3>Fonctionnalit√©s</h3>
              <p>
                Cette application d√©montre comment cr√©er un serveur web complet avec routes, rendu HTML
                et API JSON. Vous pouvez l'utiliser comme base pour vos propres projets.
              </p>
            </div>
            
            <div class="feature">
              <h3>Technologie</h3>
              <p>
                Sous le capot, nekoScript utilise Express.js pour le serveur web, mais avec une syntaxe
                simplifi√©e et en fran√ßais pour faciliter l'apprentissage et le d√©veloppement.
              </p>
            </div>
            
            <p>
              <a href="/">Retour √† l'accueil</a>
            </p>
          </main>
          
          <footer>
            <p>Propuls√© par nekoScript - Application cr√©√©e le ${new Date().toLocaleDateString('fr-FR')}</p>
          </footer>
        </body>
        </html>
      `);
    });
    
    // D√©marrer le serveur
    app.d√©marrer(PORT);
    
    nekAfficher("Serveur d√©marr√© sur le port " + PORT);
    nekRetourner "Serveur web d√©marr√© avec succ√®s";
  }
}