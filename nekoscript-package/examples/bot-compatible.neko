// Bot Discord 100% compatible avec l'interprÃ©teur nekoScript
// Ce fichier utilise uniquement JavaScript standard pour une compatibilitÃ© maximale

// Importer les modules nÃ©cessaires
const { Client, GatewayIntentBits, EmbedBuilder } = require("discord.js");

// Configuration du bot
const token = "VOTRE_TOKEN_DISCORD_ICI"; // Ã€ remplacer par votre token
const prefix = "!";

// CrÃ©er le client Discord avec les intents nÃ©cessaires
const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent,
    GatewayIntentBits.GuildMembers
  ]
});

// Ã‰vÃ©nement: quand le bot est prÃªt
client.once("ready", () => {
  console.log(`Bot connectÃ© sous le nom ${client.user.tag} !`);
  console.log(`PrÃ©sent sur ${client.guilds.cache.size} serveurs`);
  
  // DÃ©finir le statut du bot
  client.user.setActivity(`${prefix}aide`, { type: 0 }); // 0 = Playing
});

// Ã‰vÃ©nement: quand un message est reÃ§u
client.on("messageCreate", async (message) => {
  // Ignorer les messages provenant d'autres bots
  if (message.author.bot) return;
  
  // Afficher les messages reÃ§us dans la console
  console.log(`Message de ${message.author.username}: ${message.content}`);
  
  // RÃ©agir au mot "bonjour"
  if (message.content.toLowerCase().includes("bonjour")) {
    try {
      await message.react("ðŸ‘‹");
    } catch (error) {
      console.error("Erreur lors de l'ajout de la rÃ©action:", error);
    }
  }
  
  // VÃ©rifier si le message commence par le prÃ©fixe
  if (!message.content.startsWith(prefix)) return;
  
  // SÃ©parer la commande et les arguments
  const args = message.content.slice(prefix.length).trim().split(/ +/);
  const commande = args.shift().toLowerCase();
  
  // Commande: ping
  if (commande === "ping") {
    const latence = Date.now() - message.createdTimestamp;
    message.reply(`Pong! Latence: ${latence}ms`);
  }
  
  // Commande: aide
  else if (commande === "aide" || commande === "help") {
    const embed = new EmbedBuilder()
      .setColor("#8c52ff")
      .setTitle("ðŸ± Aide du Bot")
      .setDescription("Voici les commandes disponibles:")
      .addFields(
        { name: `${prefix}ping`, value: "VÃ©rifie la latence du bot", inline: true },
        { name: `${prefix}aide`, value: "Affiche cette aide", inline: true },
        { name: `${prefix}info`, value: "Affiche des informations sur le bot", inline: true },
        { name: `${prefix}avatar`, value: "Affiche ton avatar", inline: true },
        { name: `${prefix}dÃ©`, value: "Lance un dÃ© Ã  6 faces", inline: true }
      )
      .setFooter({ text: "Bot crÃ©Ã© avec nekoScript" })
      .setTimestamp();
    
    message.reply({ embeds: [embed] });
  }
  
  // Commande: info
  else if (commande === "info") {
    const embed = new EmbedBuilder()
      .setColor("#8c52ff")
      .setTitle("ðŸ± Informations")
      .setDescription("Je suis un bot Discord crÃ©Ã© avec nekoScript, un langage de programmation en franÃ§ais !")
      .addFields(
        { name: "Version", value: "1.0.0", inline: true },
        { name: "DÃ©veloppÃ© avec", value: "nekoScript", inline: true },
        { name: "CrÃ©ateur", value: "Un utilisateur de nekoScript", inline: true }
      )
      .setTimestamp();
    
    message.reply({ embeds: [embed] });
  }
  
  // Commande: avatar
  else if (commande === "avatar") {
    const utilisateur = message.mentions.users.first() || message.author;
    const embed = new EmbedBuilder()
      .setColor("#8c52ff")
      .setTitle(`Avatar de ${utilisateur.username}`)
      .setImage(utilisateur.displayAvatarURL({ dynamic: true, size: 256 }));
    
    message.reply({ embeds: [embed] });
  }
  
  // Commande: dÃ©
  else if (commande === "dÃ©" || commande === "dice") {
    const resultat = Math.floor(Math.random() * 6) + 1;
    message.reply(`ðŸŽ² Tu as obtenu un **${resultat}** !`);
  }
});

// Connecter le bot Ã  Discord
client.login(token)
  .then(() => console.log("Bot connectÃ© avec succÃ¨s !"))
  .catch(error => {
    console.error("Erreur de connexion:", error);
    console.error("VÃ©rifiez que votre token est correct.");
  });